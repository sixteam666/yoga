<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>我的通知</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Free HTML5 Website Template by FreeHTML5.co" />
		<meta name="keywords" content="free website templates, free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
		<meta name="author" content="FreeHTML5.co" />
		<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
		<!-- Animate.css -->
		<link rel="stylesheet" href="../../css/animate.css">
		<!-- Icomoon Icon Fonts-->
		<link rel="stylesheet" href="../../css/icomoon.css">
		<!-- Themify Icons-->
		<link rel="stylesheet" href="../../css/themify-icons.css">
		<!-- Bootstrap  -->
		<link rel="stylesheet" href="../../css/bootstrap.css">

		<!-- Magnific Popup -->
		<link rel="stylesheet" href="../../css/magnific-popup.css">

		<!-- Magnific Popup -->
		<link rel="stylesheet" href="../../css/bootstrap-datepicker.min.css">

		<!-- Owl Carousel  -->
		<link rel="stylesheet" href="../../css/owl.carousel.min.css">
		<link rel="stylesheet" href="../../css/owl.theme.default.min.css">

		<!-- Theme style  -->
		<link rel="stylesheet" href="../../css/style.css">

		<!-- Modernizr JS -->
		<script src="../../js/modernizr-2.6.2.min.js"></script>
	</head>
	<style type="text/css">
		.fon {
			font-family: "微软雅黑";
		}
		.message_top{
			text-align: center;
		}
		.coach_message{
			border: 3px solid rgb(9,198,171);
			border-radius: 10px;
			padding: 10px;
			
		}
		.coach_message .table div{
			float: left;
		}
		.table.coach tr td{
			border-radius: 10px;
		}
		
		/* .table.coach tr:hover{
			background-color: rgb(9,198,171);
		} */
		
		.coach_name{
			color: black;
			font-weight:bold;
			font-size: 25px !important;
			font-family: 微软雅黑 !important;
		}
		.coach_sms{
			font-size: 20px !important;
		}
		#coach_controller{
			float: right;
			height: 80%;
			margin-top: 10px;
			margin-right:20px;
		}
	</style>
	<body>
		<div class="gtco-loader"></div>
		<div id="page"></div>
		<nav class="gtco-nav" role="navigation" th:replace="/html/coach/showGym.html::coach_header">
			<div class="gtco-container">

				<div class="row" style="background-color: #09C6AB;">
					<div class="col-sm-4 col-xs-12">
						<ul>
							<li><a href="gym.html" class="fon">首页</a></li>
							<li><a href="showCoach.html" class="fon">教练</a></li>
							<li><a href="showStudent.html" class="fon">学员</a></li>
						</ul>
					</div>
					<div class="col-xs-8 text-right">
						<ul>
							<li class="has-dropdown" id="gym_top"><span style="color: white">点击登录</span></li>
							<li class="has-dropdown"><a href="#">场馆中心</a>
								<ul class="dropdown">
									
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</nav>
		<div class="gtco-section">
			
			<div class="gtco-container">
				<div class="message_top">
					<h2>签约通知</h2>
				</div>
				<div class="coach_message">
					<table id="MySign" class="table coach table-striped MySign">
						<tr th:each="gy,iterStat : ${gymList}">
							<td>
								<div><a th:href="@{/coach/showGymDetail.do?gymId=}+${gy.g_id}"><img class="gym_headimg" th:src="@{../../images/imgs/}+${gy.g_headimg}"></a></div>
								<div>&nbsp;&nbsp;&nbsp;
									<span class="gym_name" th:text="${gy.g_name}">null</span>
									<a class="gym_tips" >（点击头像查看场馆信息）</a><br><br/>
									<span class="gym_sms">&nbsp;&nbsp;&nbsp;&nbsp;该场馆很欣赏你，希望和您签约，赶快回复他</span></br>
									
								</div>
 								<div id="coach_controller">
 									<span th:text="${gy.g_password}">2019-06-01&nbsp;&nbsp;10:15:02</span><!-- 时间封装为密码字段 --></br></br>
									<button class="btn-info" idx="1" th:value="${gy.g_id}" th:onclick="deal_gym(this)" th:text="同意"></button>&nbsp;&nbsp;&nbsp;&nbsp;
									<button class="btn-danger" idx="2" th:value="${gy.g_id}" th:onclick="deal_gym(this)" th:text="拒绝"></button>
								</div>
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>
		<div class="gtco-container">
				<div class="message_top">
					<h2>学员约课</h2>
				</div>
				<div class="coach_message">
					<table id="MySign2" class="table coach table-striped MySign" >
						<tr th:each="st,iterStat : ${stuList}">
							<td>
								<div><img class="coach_headimg" th:src="@{../../images/imgs/}+${st.s_headimg}"></div>
								<div>&nbsp;&nbsp;&nbsp;
									<span class="student_name" th:text="${st.s_name}">null</span>
									<a class="student_tips" th:href="@{/coach/showStuDetail.do?stuId=}+${st.s_id}">（点击头像查看学员个人信息）</a><br><br/>
									<span class="student_sms">&nbsp;&nbsp;&nbsp;&nbsp;对方对你很感兴趣，希望选您的课程，赶快回复他</span>
									<span th:text="${st.s_password}">2019-06-01&nbsp;&nbsp;10:15:02</span><!-- 时间封装为密码字段 -->
								</div>
 								<div id="coach_controller">
 									<span th:text="${st.s_password}">2019-06-01&nbsp;&nbsp;10:15:02</span><!-- 时间封装为密码字段 --></br></br>
 									<button class="btn-info" idx="1" th:value="${st.s_id}" th:onclick="deal_stu(this)" th:text="同意"></button>&nbsp;&nbsp;&nbsp;&nbsp;
									<button class="btn-danger" idx="2" th:value="${st.s_id}" th:onclick="deal_stu(this)" th:text="拒绝"></button>
								</div>
							</td>
						</tr>
					</table>
				</div>
			</div>
		<footer id="gtco-footer" role="contentinfo">
			<div class="gtco-container">
				<div class="row row-p	b-md">
					<div class="col-md-4">
						<div class="gtco-widget">
							<h3>关于我们</h3>
							<p>蜗牛46期第六组项目，由项目负责人温攀，会长文然，技术负责人黄仁杰，产品经理滕伟，后台管理刘勇，前端张正宇负责</p>
						</div>
					</div>
					<div class="col-md-2 col-md-push-1"></div>

					<div class="col-md-2 col-md-push-1">
						<div class="gtco-widget">
							<h3 class="fon">瑜伽平台</h3>
							<ul class="gtco-footer-links">
								<li><a href="coachLogin.html" class="fon">成为教练</a></li>
								<li><a href="gymLogin.html" class="fon">场馆入驻</a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-3 col-md-push-1">
						<div class="gtco-widget">
							<h3>联系方式</h3>
							<ul class="gtco-quick-contact">
								<li><a href="#"><i class="icon-phone"></i> 15002881866</a></li>
								<li><a href="#"><i class="icon-mail2"></i>shinoda@live.cn</a></li>
								<li><a href="#"><i class="icon-chat"></i> Zzy19951117</a></li>
							</ul>
						</div>
					</div>
				</div>
				<div class="row copyright">
					<div class="col-md-12">
						<p class="pull-left">
							<small class="block">&copy; 2019 在蜗牛46期写出来的.</small> <small class="block">模板都是网上找的，描述都是自己瞎BB的</small>
						</p>
						<p class="pull-right">
							<ul class="gtco-social-icons pull-right">
								<li><a href="#"><i class="icon-twitter"></i></a></li>
								<li><a href="#"><i class="icon-facebook"></i></a></li>
								<li><a href="#"><i class="icon-linkedin"></i></a></li>
								<li><a href="#"><i class="icon-dribbble"></i></a></li>
							</ul>
						</p>
					</div>
				</div>

			</div>
		</footer>
		<div class="gototop js-top">
			<a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
		</div>

		<!-- jQuery -->
		<script src="../../js/jquery.min.js"></script>
		<!-- jQuery Easing -->
		<script src="../../js/jquery.easing.1.3.js"></script>
		<!-- Bootstrap -->
		<script src="../../js/bootstrap.min.js"></script>
		<!-- Waypoints -->
		<script src="../../js/jquery.waypoints.min.js"></script>
		<!-- Carousel -->
		<script src="../../js/owl.carousel.min.js"></script>
		<!-- countTo -->
		<script src="../../js/jquery.countTo.js"></script>
		<!-- Stellar Parallax -->
		<script src="../../js/jquery.stellar.min.js"></script>
		<!-- Magnific Popup -->
		<script src="../../js/jquery.magnific-popup.min.js"></script>
		<script src="../../js/magnific-popup-options.js"></script>
		<!-- Datepicker -->
		<script src="../../js/bootstrap-datepicker.min.js"></script>
		<!-- Main -->
		<script src="../../js/main.js"></script>
		<!-- 获取Session中的数据 -->
		<script type="text/javascript">
			//若table内为空，则显示无通知
			function isNull(){
				if ($("#MySign").children().html()==undefined) {
					$("#MySign").text("暂无申请通知")
				}
				if ($("#MySign2").children().html()==undefined) {
					$("#MySign2").text("暂无学员约课")
				}
				
			}
			isNull()
			//处理场馆申请
			function deal_gym(obj){
				var r_resid = $(obj).attr("value")
				var r_state = $(obj).attr("idx")
				alert(r_state)
				$.ajax({
					type:"post",
					url:"/coach/signGym.do?r_resid="+r_resid+"&r_state="+r_state,
					asycn:true,
					success:function(re){
						if (re == "hasGym") {
							alert("你已有签约场馆")
						}else if (re == "accept") {
							$(obj).parents("tr").remove()
							alert("签约成功")
						}else if(re == "add" || re == "isRequest"){
							alert("已向场馆发出申请")
						}else if(re == "false"){
							alert("申请失败")
						}else{
							$(obj).parents("tr").remove()
						}
						
					}
				})
			}
			//处理学员请求
			function deal_stu(obj){
				alert()
				var r_reqid = $(obj).attr("value")
				var r_state = $(obj).attr("idx")
				alert(r_state)
				$.ajax({
					type:"post",
					url:"/coach/dealStuRequest.do?r_reqid="+r_reqid+"&r_state="+r_state,
					asycn:true,
					success:function(re){
						if (re == "accept") {
							alert("已同意")
							$(obj).parents("tr").remove()
						}else if (re == "noaccept") {
							$(obj).parents("tr").remove()
						}else if(re == "network_error"){
							alert("网络异常")
						}
						
					}
				})
			}
			
		</script>
	</body>
</html>
